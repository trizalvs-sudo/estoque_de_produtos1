<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Cadastro de Produto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='produto.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='botao.css') }}">
</head>
<body>

<a href="{{ url_for('home') }}" 
    class="btn-voltar">Voltar
</a>

    <div class="container">
        <main class="content">
            <h2>Cadastrar Novo Produto</h2>
            
            <form id="formCadastroProduto" class="product-form" action="/produtos" method="POST">
                
                <input type="hidden" name="acao" value="cadastrar_produto">

                <div class="form-group">
                    <label for="nomeProduto">Nome do Produto:</label>
                    <input type="text" id="nomeProduto" name="nomeProduto" required>
                </div>

                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="quantidade">Quantidade:</label>
                        <input type="number" id="quantidade" name="quantidade" min="1" step="0.01" required>
                    </div>

                    <div class="form-group half-width">
                        <label for="valorUnitario">Valor Unitário (R$):</label>
                        <input type="number" id="valorUnitario" name="valorUnitario" step="0.01" min="0.01" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="categoria">Categoria:</label>
                    <select id="categoria" name="categoria" required>
                        <option value="Bolos no pote">Bolos no pote</option>
                        <option value="Mousses">Mousses</option>
                        <option value="Brigadeiro no pote">Brigadeiro no pote</option>
                        <option value="Sobremesas geladas">Sobremesas geladas</option>
                        <option value="Outros">Outros</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="valorTotal">Valor Total (R$):</label>
                    <input type="text" id="valorTotal" name="valorTotal" readonly value="0.00">
                    <small>O Valor Total é calculado automaticamente (Quant. x Valor Unit.).</small>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn-submit">
                        Salvar e Cadastrar Produto
                    </button>
                </div>
            </form>

        </main>
    </div>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
    const quantidadeInput = document.getElementById('quantidade');
    const valorUnitarioInput = document.getElementById('valorUnitario');
    const valorTotalInput = document.getElementById('valorTotal');

    function calcularValorTotal() {
        let quantidade = quantidadeInput.value.replace(',', '.');
        let valorUnitario = valorUnitarioInput.value.replace(',', '.');
        
        quantidade = parseFloat(quantidade) || 0;
        valorUnitario = parseFloat(valorUnitario) || 0;

        const valorTotal = quantidade * valorUnitario;

        valorTotalInput.value = valorTotal.toFixed(2);
    }

    quantidadeInput.addEventListener('input', calcularValorTotal);
    valorUnitarioInput.addEventListener('input', calcularValorTotal);

    calcularValorTotal();
});
</script>
</body>
</html>